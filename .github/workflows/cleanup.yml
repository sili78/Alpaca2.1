name: ğŸ§¹ Manual Logs Cleanup

on:
  workflow_dispatch: # ÃÈ›i oferÄƒ un buton de "Run" manual Ã®n interfaÈ›a Actions

permissions:
  actions: write # Permisiune obligatorie pentru È™tergere

jobs:
  delete-runs:
    runs-on: ubuntu-latest
    steps:
      - name: Delete old workflow runs
        env:
          GH_TOKEN: ${{ github.token }}
        run: |
          # ObÈ›inem ID-urile ultimelor 100 de rulÄƒri (fÄƒrÄƒ cea curentÄƒ) È™i le È™tergem
          RUNS=$(gh run list --limit 100 --json databaseId --jq '.[].databaseId')
          
          if [ -z "$RUNS" ]; then
            echo "Nu existÄƒ log-uri de È™ters."
          else
            for id in $RUNS; do
              echo "È˜terg rularea cu ID: $id"
              gh run delete $id || echo "Nu s-a putut È™terge $id"
            done
            echo "âœ… CurÄƒÈ›enie terminatÄƒ!"
          fi
